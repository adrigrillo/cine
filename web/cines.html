<!DOCTYPE html>
<html lang="es" ng-app="cine">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cine | Entradas.com</title>
  <link rel="icon" type="image/png" href="images/e_roboto.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS de la página -->
  <link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/normalize.css">
  <link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/main.css">
  <link rel="stylesheet" href="bower_components/angular-material/angular-material.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/default.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Script de la página, aqui va el angular y el material y cosas para que funcione en red -->
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-animate/angular-animate.js"></script>
  <script src="bower_components/angular-aria/angular-aria.js"></script>
  <script src="bower_components/angular-messages/angular-messages.js"></script>
  <script src="bower_components/angular-material/angular-material.js"></script>
  <script src="bower_components/firebase/firebase.js"></script>
  <script src="bower_components/angularfire/dist/angularfire.js"></script>
  <script src="components/version/version.js"></script>
  <script src="components/version/version-directive.js"></script>
  <script src="components/version/interpolate-filter.js"></script>
  <script src="bower_components/html5-boilerplate/dist/js/vendor/modernizr-2.8.3.min.js"></script>

  <!-- Modulos cargados -->
  <script src="scripts/app.js"></script>
  <script src="scripts/database.js"></script>

</head>
<body ng-cloak="">
  <!-- COLUMNA DE DECISION DE CINES A MOSTRAR -->
  <div layout="row" class="md-padding" ng-controller="verCines as cines">
    <div flex="25" hide-xs>
      <md-subheader md-no-sticky>
        <span>Categorias</span>
      </md-subheader>
      <md-divider></md-divider>
      <md-list ng-init="mostrar = 2">
        <md-list-item class="secondary-button-padding" ng-click="mostrar = 1">
          <i class="material-icons cine-ico">favorite</i>
          <p>Favoritos</p>
        </md-list-item>
        <md-divider ng-if="!$last"></md-divider>
        <md-list-item class="secondary-button-padding" ng-click="mostrar = 2">
          <i class="material-icons cine-ico">near_me</i>
          <p>Cercanos</p>
        </md-list-item>
        <md-divider ng-if="!$last"></md-divider>
        <md-list-item class="secondary-button-padding" ng-click="mostrar = 3">
          <i class="material-icons cine-ico">star_rate</i>
          <p>Mejor valorados</p>
        </md-list-item>
      </md-list>
    </div>

    <!-- COLUMNA DE LISTA DE CINES DISPONIBLES -->
    <div flex-xs="100" flex="35">
      <md-subheader md-no-sticky>
        <span>Cines</span>
      </md-subheader>
      <md-divider></md-divider>

      <!-- LISTA DE CINES MAS CERCANOS -->
      <md-list ng-show="mostrar === 2" ng-repeat="cine in cines" ng-init="i=$index;" layout-align="start center">
        <md-list-item ng-click="$parent.detalle = i;" class="md-3-line" layout="row" layout-xs="column">
            <img ng-src="{{cine.imagen}}" class="md-avatar" alt="Foto cine"/>
            <div class="md-list-item-text">
              <h3>{{cine.nombre}}</h3>
              <h4>{{cine.encuentra}}</h4>
              <p>{{cine.direccion}}</p>
            </div>
            <md-button class="md-icon-button md-secondary" aria-label="info" hide-gt-xs ng-init="!card"
              ng-click="card=!card">
              <i class="material-icons">info_outline</i>
            </md-button>
        </md-list-item>

        <!-- DIV DE INFORMACION -->
        <md-card hide-gt-xs ng-show="card">
          <img ng-src="{{cine.mapa}}" alt="mapa" class="md-card-image">
          <md-card-content layout="row" layout-align="start center">
            <md-list>
              <md-list-item>
                <i class="material-icons cine-ico">place</i>
                <a target="_blank" ng-href="{{cines[0].llegar}}">
                  {{cine.direccion}}
                </a>
              </md-list-item>
              <md-list-item>
                <i class="material-icons cine-ico">link</i>
                <a target="_blank" ng-href="{{cines[0].paginaweb}}">
                  {{cine.paginaweb}}
                </a>
              </md-list-item>
              <md-list-item>
                <i class="material-icons cine-ico">phone</i>
                <p>{{cine.telefono}}</p>
              </md-list-item>
            </md-list>
          </md-card-content>
          <md-card-actions layout="row" layout-align="end center">
            <md-button class="md-icon-button" aria-label="Favorite" ng-init="!liked" ng-click="liked=!liked">
              <i class="material-icons pink2 cine-fab mini" ng-show="liked">favorite</i>
              <i class="material-icons pink2 cine-fab mini" ng-show="!liked">favorite_border</i>
            </md-button>
            <md-button class="md-icon-button" aria-label="Llegar">
              <i class="material-icons blue cine-fab mini">navigation</i>
            </md-button>
          </md-card-actions>
        </md-card>
      </md-list>

      <!-- LISTA DE CINES MEJOR VALORADOS -->
      <md-list ng-show="mostrar === 3" ng-repeat="cine in cines | orderBy:'-valoracion'" ng-init="i=$index+4;"
        layout-align="start center">
        <md-list-item ng-click="$parent.detalle = i;" class="md-3-line" layout="row" layout-xs="column" >
            <img ng-src="{{cine.imagen}}" class="md-avatar" alt="Foto cine"/>
            <div class="md-list-item-text">
              <h3>{{cine.nombre}}</h3>
              <h4>{{cine.encuentra}}</h4>
              <p>{{cine.direccion}}</p>
            </div>
            <md-button class="md-icon-button" aria-label="info" hide-gt-xs>
              <i class="material-icons">info_outline</i>
            </md-button>
        </md-list-item>
      </md-list>
    </div>

    <!-- CONTENIDO DE LA INFORMACION -->
    <md-content flex="45" hide-xs ng-init="detalle=0">
      <div>
        <img ng-show="detalle === 0 || detalle === 5" ng-src="{{cines[0].mapa}}" alt="mapa" class="mapa">
        <img ng-show="detalle === 1 || detalle === 4" ng-src="{{cines[1].mapa}}" alt="mapa" class="mapa">
        <img ng-show="detalle === 2 || detalle === 6" ng-src="{{cines[2].mapa}}" alt="mapa" class="mapa">
        <img ng-show="detalle === 3 || detalle === 7" ng-src="{{cines[3].mapa}}" alt="mapa" class="mapa">
      </div>
      <md-toolbar>
        <div class="md-toolbar-tools">
          <md-button class="md-fab md-mini md-warn md-hue" aria-label="Favorito" ng-init="!liked"
            ng-click="liked=!liked">
            <i class="material-icons pink1 cine-fab mini" ng-show="liked">favorite</i>
            <i class="material-icons pink1 cine-fab mini" ng-show="!liked">favorite_border</i>
          </md-button>
          <span flex=""></span>
          <h2>
            <span ng-show="detalle === 0 || detalle === 5">{{cines[0].nombre}}</span>
            <span ng-show="detalle === 1 || detalle === 4">{{cines[1].nombre}}</span>
            <span ng-show="detalle === 2 || detalle === 6">{{cines[2].nombre}}</span>
            <span ng-show="detalle === 3 || detalle === 7">{{cines[3].nombre}}</span>
          </h2>
          <span flex=""></span>
          <md-button class="md-fab md-hue-3" aria-label="Select">
            <i class="material-icons md-36 cine-fab">done</i>
          </md-button>
        </div>
      </md-toolbar>
      <div>
        <md-content>
          <md-subheader class="md-primary">
            Información
          </md-subheader>
          <md-list>
            <md-list-item>
              <i class="material-icons cine-ico">place</i>
              <a ng-show="detalle === 0 || detalle === 5" target="_blank" ng-href="{{cines[0].llegar}}">
                {{cines[0].direccion}}
              </a>
              <a ng-show="detalle === 1 || detalle === 4" target="_blank" ng-href="{{cines[1].llegar}}">
                {{cines[1].direccion}}
              </a>
              <a ng-show="detalle === 2 || detalle === 6" target="_blank" ng-href="{{cines[2].llegar}}">
                {{cines[2].direccion}}
              </a>
              <a ng-show="detalle === 3 || detalle === 7" target="_blank" ng-href="{{cines[3].llegar}}">
                {{cines[3].direccion}}
              </a>
            </md-list-item>
            <md-list-item>
              <i class="material-icons cine-ico">link</i>
              <a ng-show="detalle === 0 || detalle === 5" target="_blank" ng-href="{{cines[0].paginaweb}}">
                {{cines[0].paginaweb}}
              </a>
              <a ng-show="detalle === 1 || detalle === 4" target="_blank" ng-href="{{cines[0].paginaweb}}">
                {{cines[1].paginaweb}}
              </a>
              <a ng-show="detalle === 2 || detalle === 6" target="_blank" ng-href="{{cines[0].paginaweb}}">
                {{cines[2].paginaweb}}
              </a>
              <a ng-show="detalle === 3 || detalle === 7" target="_blank" ng-href="{{cines[0].paginaweb}}">
                {{cines[3].paginaweb}}
              </a>
            </md-list-item>
            <md-list-item>
              <i class="material-icons cine-ico">phone</i>
              <p ng-show="detalle === 0 || detalle === 5" >{{cines[0].telefono}}</p>
              <p ng-show="detalle === 1 || detalle === 4" >{{cines[1].telefono}}</p>
              <p ng-show="detalle === 2 || detalle === 6" >{{cines[2].telefono}}</p>
              <p ng-show="detalle === 3 || detalle === 7" >{{cines[3].telefono}}</p>
            </md-list-item>
          </md-list>
        </md-content>
      </div>
    </md-content>
  </div>
</body>
</html>
